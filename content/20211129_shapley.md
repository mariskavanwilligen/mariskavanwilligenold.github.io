Title: Shapley values
Date: 2021-10-29 15:20
Modified: 2021-10-29 15:20
Tags: Shapley values, Machine learning, Game Theory
Slug: shapley-values
Authors: Mariska van Willigen
Summary: Short introduction about Shapley values and how they can be used to explain machine learning models

## Introduction
This will be about the Shapley values

How do we get from the base rate to the prediction made?

> Let's have a look!

## Bike rental dataset
This dataset contains daily counts of rented bicycles from the bicycle rental company Capital-Bikeshare in Washington D.C., along with weather and seasonal information. The data was kindly made openly available by Capital-Bikeshare. Fanaee-T and Gama (2013)14 added weather data and season information. The goal is to predict how many bikes will be rented depending on the weather and the day. The data can be downloaded from the UCI Machine Learning Repository.

New features were added to the dataset and not all original features were used for the examples in this book. Here is the list of features that were used:

- Count of bicycles including both casual and registered users. The count is used as the target in the regression task.
- The season, either spring, summer, fall or winter.
- Indicator whether the day was a holiday or not.
- The year, either 2011 or 2012.
- Number of days since the 01.01.2011 (the first day in the dataset). This feature was introduced to take account of the trend over time.
- Indicator whether the day was a working day or weekend.
- The weather situation on that day.
- Temperature in degrees Celsius.
- Relative humidity in percent (0 to 100).
- Wind speed in km per hour.

``` js
# Some code example
import pyspark
from pyspark.context import SparkContext
from pyspark.sql.session import SparkSession
sc = SparkContext('local')
spark = SparkSession(sc)

bike_data = spark.read.csv('data/bike_sales.csv', header=True, inferSchema=True)

bike_data.limit(5).toPandas()
```
![](/images/data/data_view.png)